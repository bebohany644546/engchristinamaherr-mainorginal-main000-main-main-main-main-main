<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø¯Ø¹Ù… Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(15, 23, 42, 0.8);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid #f59e0b;
        }
        h1 {
            color: #f59e0b;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 8px;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        .test-input {
            width: 100%;
            padding: 12px;
            background: #1e293b;
            border: 1px solid #f59e0b;
            border-radius: 6px;
            color: white;
            font-size: 14px;
            margin-bottom: 10px;
        }
        .test-output {
            background: #0f172a;
            padding: 12px;
            border-radius: 6px;
            border: 1px solid #22c55e;
            color: #22c55e;
            font-family: monospace;
            word-break: break-all;
            margin-bottom: 10px;
        }
        .test-examples {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }
        .example {
            background: rgba(15, 23, 42, 0.7);
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #f59e0b;
        }
        .example-title {
            color: #f59e0b;
            font-weight: bold;
            margin-bottom: 8px;
        }
        .example-input {
            color: #94a3b8;
            font-family: monospace;
            font-size: 12px;
            margin-bottom: 5px;
        }
        .example-output {
            color: #22c55e;
            font-family: monospace;
            font-size: 12px;
        }
        .status {
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-top: 10px;
        }
        .status.success {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            border: 1px solid #22c55e;
        }
        .status.error {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid #ef4444;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¥ Ø§Ø®ØªØ¨Ø§Ø± Ø¯Ø¹Ù… Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨ Ø§Ù„Ù…Ø­Ø³Ù†</h1>
        
        <div class="test-section">
            <h3>Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¨Ø§Ø´Ø±:</h3>
            <input type="text" class="test-input" id="testInput" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨ Ù‡Ù†Ø§...">
            <div class="test-output" id="testOutput">Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§...</div>
            <div class="status" id="testStatus" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>Ø£Ù…Ø«Ù„Ø© Ù…Ø¯Ø¹ÙˆÙ…Ø©:</h3>
            <div class="test-examples" id="examples"></div>
        </div>
    </div>

    <script>
        // ÙˆØ¸ÙŠÙØ© ØªØ­Ø³ÙŠÙ† Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨ (Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ)
        function improveYouTubeUrl(inputUrl) {
            let improved = inputUrl.trim();
            
            // Ø¥Ø¶Ø§ÙØ© https:// Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙÙ‚ÙˆØ¯
            if (!improved.startsWith('http://') && !improved.startsWith('https://')) {
                improved = 'https://' + improved;
            }
            
            // ØªØµØ­ÙŠØ­ www.youtube Ø¥Ù„Ù‰ youtube
            improved = improved.replace(/www\.youtube/g, 'youtube');
            
            // ØªØµØ­ÙŠØ­ youtube Ø¥Ù„Ù‰ youtube.com
            if (improved.includes('youtube') && !improved.includes('youtube.com')) {
                improved = improved.replace(/youtube(?!\.com)/g, 'youtube.com');
            }
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ© ÙˆØ§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ù€ v ÙÙ‚Ø·
            if (improved.includes('youtube.com/watch')) {
                try {
                    const urlObj = new URL(improved);
                    const videoId = urlObj.searchParams.get('v');
                    if (videoId) {
                        improved = `https://youtube.com/watch?v=${videoId}`;
                    }
                } catch (e) {
                    // Ø¥Ø°Ø§ ÙØ´Ù„ parsingØŒ Ù†Ø­Ø§ÙˆÙ„ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ø¹Ø±Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙŠØ¯ÙˆÙŠØ§Ù‹
                    const match = improved.match(/[?&]v=([a-zA-Z0-9_-]{11})/);
                    if (match) {
                        improved = `https://youtube.com/watch?v=${match[1]}`;
                    }
                }
            }
            
            // ØªØµØ­ÙŠØ­ Ø±ÙˆØ§Ø¨Ø· youtu.be
            if (improved.includes('youtu.be/') && !improved.includes('youtube.com')) {
                const match = improved.match(/youtu\.be\/([a-zA-Z0-9_-]{11})/);
                if (match) {
                    improved = `https://youtube.com/watch?v=${match[1]}`;
                }
            }
            
            return improved;
        }

        // ÙˆØ¸ÙŠÙØ© Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ø¹Ø±Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø±Ø§Ø¨Ø·
        function extractVideoId(url) {
            const cleanUrl = url.trim();
            
            const patterns = [
                /(?:youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})/,
                /(?:youtube\.com\/watch\?.*&v=)([a-zA-Z0-9_-]{11})/,
                /(?:youtube\.com\/watch\?.*v=)([a-zA-Z0-9_-]{11})/,
                /(?:youtu\.be\/)([a-zA-Z0-9_-]{11})/,
                /(?:youtu\.be\/)([a-zA-Z0-9_-]{11})\?/,
                /(?:youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,
                /(?:youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})\?/,
                /(?:youtube\.com\/v\/)([a-zA-Z0-9_-]{11})/,
                /(?:youtube\.com\/shorts\/)([a-zA-Z0-9_-]{11})/,
                /(?:m\.youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})/,
                /(?:m\.youtube\.com\/watch\?.*v=)([a-zA-Z0-9_-]{11})/,
                /(?:youtube\.com\/watch\?.*[&?]v=)([a-zA-Z0-9_-]{11})/,
                /(?:youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})&t=/,
                /(?:youtu\.be\/)([a-zA-Z0-9_-]{11})\?t=/,
                /(?:youtube\.com\/watch\?.*list=.*&v=)([a-zA-Z0-9_-]{11})/,
                /(?:youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})&list=/,
                /^([a-zA-Z0-9_-]{11})$/
            ];

            for (const pattern of patterns) {
                const match = cleanUrl.match(pattern);
                if (match && match[1] && match[1].length === 11) {
                    return match[1];
                }
            }
            
            return null;
        }

        // Ø£Ù…Ø«Ù„Ø© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
        const testExamples = [
            {
                title: "Ø±Ø§Ø¨Ø· Ø¹Ø§Ø¯ÙŠ",
                input: "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
                expected: "https://youtube.com/watch?v=dQw4w9WgXcQ"
            },
            {
                title: "Ø±Ø§Ø¨Ø· Ù…Ø®ØªØµØ±",
                input: "https://youtu.be/dQw4w9WgXcQ",
                expected: "https://youtube.com/watch?v=dQw4w9WgXcQ"
            },
            {
                title: "Ø±Ø§Ø¨Ø· Shorts",
                input: "https://youtube.com/shorts/dQw4w9WgXcQ",
                expected: "https://youtube.com/watch?v=dQw4w9WgXcQ"
            },
            {
                title: "Ø±Ø§Ø¨Ø· ØªØ¶Ù…ÙŠÙ†",
                input: "https://youtube.com/embed/dQw4w9WgXcQ",
                expected: "https://youtube.com/watch?v=dQw4w9WgXcQ"
            },
            {
                title: "Ù…Ø¹Ø±Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙ‚Ø·",
                input: "dQw4w9WgXcQ",
                expected: "https://dQw4w9WgXcQ"
            },
            {
                title: "Ø±Ø§Ø¨Ø· Ù…Ø¹ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©",
                input: "https://youtube.com/watch?v=dQw4w9WgXcQ&t=30s&list=PLxyz",
                expected: "https://youtube.com/watch?v=dQw4w9WgXcQ"
            },
            {
                title: "Ø±Ø§Ø¨Ø· Ø¨Ø¯ÙˆÙ† https",
                input: "youtube.com/watch?v=dQw4w9WgXcQ",
                expected: "https://youtube.com/watch?v=dQw4w9WgXcQ"
            },
            {
                title: "Ø±Ø§Ø¨Ø· Ù…ÙˆØ¨Ø§ÙŠÙ„",
                input: "https://m.youtube.com/watch?v=dQw4w9WgXcQ",
                expected: "https://youtube.com/watch?v=dQw4w9WgXcQ"
            }
        ];

        // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ù…Ø«Ù„Ø©
        function displayExamples() {
            const examplesContainer = document.getElementById('examples');
            testExamples.forEach(example => {
                const result = improveYouTubeUrl(example.input);
                const videoId = extractVideoId(result);
                const isValid = videoId !== null;
                
                const exampleDiv = document.createElement('div');
                exampleDiv.className = 'example';
                exampleDiv.innerHTML = `
                    <div class="example-title">${example.title}</div>
                    <div class="example-input">Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„: ${example.input}</div>
                    <div class="example-output">Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${result}</div>
                    <div class="status ${isValid ? 'success' : 'error'}">
                        ${isValid ? 'âœ… ØµØ§Ù„Ø­ - Ù…Ø¹Ø±Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ: ' + videoId : 'âŒ ØºÙŠØ± ØµØ§Ù„Ø­'}
                    </div>
                `;
                examplesContainer.appendChild(exampleDiv);
            });
        }

        // Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¨Ø§Ø´Ø±
        document.getElementById('testInput').addEventListener('input', function(e) {
            const input = e.target.value;
            const output = document.getElementById('testOutput');
            const status = document.getElementById('testStatus');
            
            if (!input.trim()) {
                output.textContent = 'Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§...';
                status.style.display = 'none';
                return;
            }
            
            const result = improveYouTubeUrl(input);
            const videoId = extractVideoId(result);
            const isValid = videoId !== null;
            
            output.textContent = result;
            status.style.display = 'block';
            status.className = `status ${isValid ? 'success' : 'error'}`;
            status.textContent = isValid ? 
                `âœ… ØµØ§Ù„Ø­ - Ù…Ø¹Ø±Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ: ${videoId}` : 
                'âŒ Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ§Ù„Ø­';
        });

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        displayExamples();
    </script>
</body>
</html>
